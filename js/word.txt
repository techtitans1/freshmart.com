index.html 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreshMart - Your Online Grocery Store</title>
    <!-- Link to external CSS file -->
    <link rel="stylesheet" href="css/styles.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Add these script tags before your main JS file -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<!-- Add these before your script.js -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
</head>
<body>
    <!-- ==================== NAVIGATION BAR ==================== -->
    <nav class="navbar" id="navbar">
        <!-- Left Section: Logo and Site Name -->
        <div class="nav-left">
            <!-- Site Logo and Name -->
            <div class="logo">
                <i class="fas fa-leaf logo-icon"></i>
                <span class="site-name">FreshMart</span>
            </div>
            
            <!-- Location Selector Button -->
            <div class="location-selector" id="locationBtn">
                <i class="fas fa-map-marker-alt"></i>
                <div class="location-text">
                    <span class="deliver-to">Deliver to</span>
                    <span class="location-name" id="currentLocation">Select Location</span>
                </div>
                <i class="fas fa-chevron-down"></i>
            </div>
        </div>

        <!-- Center Section: Search Bar -->
        <div class="nav-center">
            <!-- Search Bar Container -->
            <div class="search-container">
                <!-- Recent Searches Scrolling Text -->
                <div class="search-suggestions" id="searchSuggestions">
                    <span class="scrolling-text" id="scrollingText"></span>
                </div>
                
                <!-- Search Input Field -->
                <input type="text" class="search-input" id="searchInput" placeholder="Search for groceries...">
                
                <!-- Voice Search Button -->
                <button class="voice-btn" id="voiceBtn" title="Voice Search">
                    <i class="fas fa-microphone"></i>
                </button>
                
                <!-- Language Translation Button -->
                <button class="translate-btn" id="translateBtn" title="Change Language">
                    <i class="fas fa-language"></i>
                </button>
                
                <!-- Search Submit Button -->
                <button class="search-btn" id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            <!-- Language Dropdown Menu -->
            <div class="language-dropdown" id="languageDropdown">
                <div class="language-option" data-lang="en">English</div>
                <div class="language-option" data-lang="hi">हिंदी (Hindi)</div>
                <div class="language-option" data-lang="te">తెలుగు (Telugu)</div>
                <div class="language-option" data-lang="ta">தமிழ் (Tamil)</div>
                <div class="language-option" data-lang="es">Español (Spanish)</div>
                <div class="language-option" data-lang="fr">Français (French)</div>
            </div>
        </div>

        <!-- Right Section: Auth, Profile, Cart -->
                <div class="nav-right">

                <!-- Login / Signup -->
                <a href="login.html">
                    <button class="auth-btn" id="authBtn">
                        <i class="fas fa-user"></i>
                        <span>Login/Signup</span>
                    </button>
                </a>

                <!-- Profile -->
                <a href="profile.html">
                    <button class="profile-btn hidden" id="profileBtn">
                        <i class="fas fa-user-circle"></i>
                    </button>
                </a>

                <!-- Cart -->
                <a href="cart.html">
                    <button class="cart-btn" onclick="redirectCart()">
                        <i class="fas fa-shopping-cart"></i>
                        Cart
                        <span class="cart-count" id="cartCount">0</span>
                    </button>

                </a>

            </div>

    </nav>

    <!-- ==================== LOCATION MODAL ==================== -->
    <div class="modal" id="locationModal">
        <div class="modal-content location-modal-content">
            <!-- Modal Close Button -->
            <button class="modal-close" id="closeLocationModal">&times;</button>
            
            <h2><i class="fas fa-map-marker-alt"></i> Select Delivery Location</h2>
            
            <!-- Detect Current Location Button -->
            <button class="detect-location-btn" id="detectLocationBtn">
                <i class="fas fa-crosshairs"></i>
                Detect my location
            </button>
            
            <div class="divider"><span>OR</span></div>
            
            <!-- Manual Address Input -->
            <div class="form-group">
                <label for="manualAddress">Enter your address</label>
                <input type="text" id="manualAddress" placeholder="Enter your full address">
            </div>
            
            <!-- Pincode Input -->
            <div class="form-group">
                <label for="pincode">Pincode</label>
                <input type="text" id="pincode" placeholder="Enter pincode" maxlength="6">
            </div>
            
            <!-- Save Location Button -->
            <button class="primary-btn" id="saveLocationBtn">Save Location</button>
        </div>
    </div>

   
            
        

    <!-- ==================== MAIN CONTENT ==================== -->
    <main class="main-content">
        <!-- ==================== HERO SECTION ==================== -->
        <section class="hero-section" id="heroSection">
            <div class="hero-content">
                <div class="hero-text">
                    <h1>Fresh Groceries <span class="highlight">Delivered</span> to Your Doorstep</h1>
                    <p>Get farm-fresh vegetables, fruits, dairy products, and daily essentials delivered within hours. Quality guaranteed!</p>
                    
                    <!-- Hero Features -->
                    <div class="hero-features">
                        <div class="feature">
                            <i class="fas fa-truck"></i>
                            <span>Free Delivery</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-clock"></i>
                            <span>2 Hour Delivery</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-leaf"></i>
                            <span>100% Fresh</span>
                        </div>
                    </div>
                    
                    <!-- Hero CTA Button -->
                    <button class="hero-cta" id="shopNowBtn">
                        Shop Now <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                
                <!-- Hero Image -->
                <div class="hero-image">
                    <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=600" alt="Fresh Groceries">
                    
                    <!-- Floating Elements -->
                    <div class="floating-card card-1">
                        <i class="fas fa-apple-alt"></i>
                        <span>Fresh Fruits</span>
                    </div>
                    <div class="floating-card card-2">
                        <i class="fas fa-carrot"></i>
                        <span>Vegetables</span>
                    </div>
                    <div class="floating-card card-3">
                        <i class="fas fa-cheese"></i>
                        <span>Dairy</span>
                    </div>
                </div>
            </div>
            
            <!-- Hero Wave Decoration -->
            <div class="hero-wave">
                <svg viewBox="0 0 1440 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z" fill="white"/>
                </svg>
            </div>
        </section>

        <!-- ==================== CATEGORIES SECTION ==================== -->
    <section class="categories-section" id="categoriesSection">
        <div class="section-header">
            <h2>Shop by Category</h2>
            <p>Browse through our wide range of categories</p>
        </div>

        <div class="categories-grid">

        <!--<a href="category.html?type=fruits" class="category-link">
            <div class="category-card">
                <img src="assets/images/categories/fruits.jpg" alt="Fresh Fruits" class="category-img">
                <span class="category-name">Fruits</span>
            </div>
        </a>-->

        <a href="category.html?type=vegetables" class="category-link">
            <div class="category-card">
                <img src="assests/images/Vegetables.jpeg" alt="Vegetables" class="category-img">
                <span class="category-name">Vegetables & Fruits</span>
            </div>
        </a>

        <a href="category.html?type=dairy" class="category-link">
            <div class="category-card">
                <img src="assests/images/Dairy.jpeg" alt="Dairy & Eggs" class="category-img">
                <span class="category-name">Dairy & Eggs</span>
            </div>
        </a>

        <a href="category.html?type=bakery" class="category-link">
            <div class="category-card">
                <img src="assests/images/Bakery.jpeg" alt="Bakery" class="category-img">
                <span class="category-name">Bakery</span>
            </div>
        </a>

        <a href="category.html?type=beverages" class="category-link">
            <div class="category-card">
                <img src="assests/images/Cooldrinks.jpeg" alt="Beverages" class="category-img">
                <span class="category-name">Beverages</span>
            </div>
        </a>

        <a href="category.html?type=snacks" class="category-link">
            <div class="category-card">
                <img src="assests/images/Snack.jpeg" alt="Snacks" class="category-img">
                <span class="category-name">Snacks</span>
            </div>
        </a>

        <!--<a href="category.html?type=meat" class="category-link">
            <div class="category-card">
                <img src="assests/images/Meat.jpeg" alt="Meat & Fish" class="category-img">
                <span class="category-name">Meat & Fish</span>
            </div>
        </a>-->

        <a href="category.html?type=juices" class="category-link">
            <div class="category-card">
                <img src="assests/images/Juice.jpeg" alt="Juices" class="category-img">
                <span class="category-name">Juices</span>
            </div>
        </a>

        <!--<a href="category.html?type=frozen" class="category-link">
            <div class="category-card">
                <img src="assets/images//frozen.jpg" alt="Frozen Foods" class="category-img">
                <span class="category-name">Frozen Foods</span>
            </div>
        </a>-->

        <a href="category.html?type=tea-coffee" class="category-link">
            <div class="category-card">
                <img src="assests/images/Tea.jpeg" alt="Tea & Coffee Powders" class="category-img">
                <span class="category-name">Tea & Coffee Powders</span>
            </div>
        </a>

        <!--<a href="category.html?type=biscuits" class="category-link">
            <div class="category-card">
                <img src="assets/images/categories/biscuits.jpg" alt="Baked Items & Biscuits" class="category-img">
                <span class="category-name">Baked Items & Biscuits</span>
            </div>
        </a>-->

        <a href="category.html?type=grains" class="category-link">
            <div class="category-card">
                <img src="assests/images/Rice.jpeg" alt="Atta, Rice & Pulses" class="category-img">
                <span class="category-name">Atta, Rice & Pulses</span>
            </div>
        </a>

        <a href="category.html?type=dry-fruits" class="category-link">
            <div class="category-card">
                <img src="assests/images/Dryfruit.jpeg" alt="Dry Fruits" class="category-img">
                <span class="category-name">Dry Fruits</span>
            </div>
        </a>

        <a href="category.html?type=masala" class="category-link">
            <div class="category-card">
                <img src="assests/images/Masala.jpeg" alt="Masala Powders" class="category-img">
                <span class="category-name">Masala Powders</span>
            </div>
        </a>

         <a href="category.html?type=oils" class="category-link">
            <div class="category-card">
                <img src="assests/images/Oil.jpeg" alt="Oils" class="category-img">
                <span class="category-name">Oils & Sauces</span>
            </div>
        </a>

         <a href="category.html?type=cleaning_liquids" class="category-link">
            <div class="category-card">
                <img src="assests/images/Clean.jpeg" alt="Cleaning_Liquids" class="category-img">
                <span class="category-name">Cleaning Liquids & Room Freshness</span>
            </div>
        </a>

         <a href="category.html?type=Baby Care" class="category-link">
            <div class="category-card">
                <img src="assests/images/Baby.jpeg" alt="Baby_Care" class="category-img">
                <span class="category-name">BabyCare Products</span>
            </div>
        </a>

        <a href="category.html?type=workout" class="category-link">
            <div class="category-card">
                <img src="assests/images/Workout.jpeg" alt="Workout" class="category-img">
                <span class="category-name">Workout Essentials</span>
            </div>
        </a>

         <a href="category.html?type=Home Essentials" class="category-link">
            <div class="category-card">
                <img src="assests/images/Home.jpeg" alt="Home Essentials" class="category-img">
                <span class="category-name">Home Essentials</span>
            </div>
        </a>

         <a href="category.html?type=Festival" class="category-link">
            <div class="category-card">
                <img src="assests/images/Festival.jpeg" alt="Festival and Occation Needs" class="category-img">
                <span class="category-name">Festival and Occation Needs </span>
            </div>
        </a>

         <a href="category.html?type=Party" class="category-link">
            <div class="category-card">
                <img src="assests/images/Party.jpeg" alt="Party Essentials" class="category-img">
                <span class="category-name">Party Essentials</span>
            </div>
        </a>

         <a href="category.html?type=Tissues" class="category-link">
            <div class="category-card">
                <img src="assests/images/Tissue.jpeg" alt="Tissues" class="category-img">
                <span class="category-name">Tissues & Sanitizers</span>
            </div>
        </a>

         <a href="category.html?type=bathroom Essentials" class="category-link">
            <div class="category-card">
                <img src="assests/images/Bathroom.jpeg" alt="Bathroom Essentials" class="category-img">
                <span class="category-name">Bathroom Essentials</span>
            </div>
        </a>

        <!-- <a href="category.html?type=sports" class="category-link">
            <div class="category-card">
                <img src="assets/images/categories/masala.jpg" alt="Sports and Fitness" class="category-img">
                <span class="category-name">Sports & Fitness</span>
            </div>
        </a> -->

         <a href="category.html?type=chocolates" class="category-link">
            <div class="category-card">
                <img src="assests/images/Chocolates.jpeg" alt="Chocolates and Icecreams" class="category-img">
                <span class="category-name">Chocalates </span>
            </div>
        </a>

         <a href="category.html?type=masala" class="category-link">
            <div class="category-card">
                <img src="assests/images/Icecream.jpeg" alt="Icecreams" class="category-img">
                <span class="category-name">Ice Creams</span>
            </div>
        </a> 
    </div>
</section>




        <!-- ==================== PRODUCTS SECTION ==================== -->
        <section class="products-section" id="productsSection">
            <div class="section-header">
                <h2>Featured Products</h2>
                <p>Best quality groceries at best prices</p>
            </div>
            
            <!-- Products Grid -->
            <div class="products-grid" id="productsGrid">
                <!-- Product cards will be dynamically added here -->
            </div>
        </section>

        <!-- ==================== OFFERS SECTION ==================== -->
        <section class="offers-section" id="offersSection">
            <div class="section-header">
                <h2>Today's Best Deals</h2>
                <p>Don't miss out on these amazing offers</p>
            </div>
            
            <!-- Offers Grid -->
            <div class="offers-grid">
                <!-- Offer Card 1 -->
                <div class="offer-card offer-1">
                    <div class="offer-content">
                        <span class="offer-tag">50% OFF</span>
                        <h3>Fresh Fruits</h3>
                        <p>On your first order</p>
                        <button class="offer-btn">Shop Now</button>
                    </div>
                    <img src="https://images.unsplash.com/photo-1619566636858-adf3ef46400b?w=300" alt="Fruits Offer">
                </div>
                
                <!-- Offer Card 2 -->
                <div class="offer-card offer-2">
                    <div class="offer-content">
                        <span class="offer-tag">Buy 1 Get 1</span>
                        <h3>Organic Veggies</h3>
                        <p>Limited time offer</p>
                        <button class="offer-btn">Shop Now</button>
                    </div>
                    <img src="https://images.unsplash.com/photo-1540420773420-3366772f4999?w=300" alt="Veggies Offer">
                </div>
                
                <!-- Offer Card 3 -->
                <div class="offer-card offer-3">
                    <div class="offer-content">
                        <span class="offer-tag">Free Delivery</span>
                        <h3>Dairy Products</h3>
                        <p>On orders above ₹500</p>
                        <button class="offer-btn">Shop Now</button>
                    </div>
                    <img src="https://images.unsplash.com/photo-1628088062854-d1870b4553da?w=300" alt="Dairy Offer">
                </div>
            </div>
        </section>

        <!-- ==================== WHY CHOOSE US SECTION ==================== -->
        <section class="why-us-section" id="whyUsSection">
            <div class="section-header">
                <h2>Why Choose FreshMart?</h2>
                <p>We're committed to bringing you the best shopping experience</p>
            </div>
            
            <!-- Features Grid -->
            <div class="why-us-grid">
                <!-- Feature 1 -->
                <div class="why-us-card">
                    <div class="why-us-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <h3>100% Fresh Products</h3>
                    <p>All our products are sourced directly from farms and verified suppliers</p>
                </div>
                
                <!-- Feature 2 -->
                <div class="why-us-card">
                    <div class="why-us-icon">
                        <i class="fas fa-truck"></i>
                    </div>
                    <h3>Express Delivery</h3>
                    <p>Get your groceries delivered within 2 hours of placing your order</p>
                </div>
                
                <!-- Feature 3 -->
                <div class="why-us-card">
                    <div class="why-us-icon">
                        <i class="fas fa-hand-holding-usd"></i>
                    </div>
                    <h3>Best Prices</h3>
                    <p>We offer competitive prices and regular discounts on all products</p>
                </div>
                
                <!-- Feature 4 -->
                <div class="why-us-card">
                    <div class="why-us-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3>24/7 Support</h3>
                    <p>Our customer support team is always ready to help you</p>
                </div>
            </div>
        </section>
    </main>

    <!-- ==================== FOOTER ==================== -->
    <footer class="footer" id="footer">
        <div class="footer-content">
            <!-- Footer About -->
            <div class="footer-section">
                <div class="footer-logo">
                    <i class="fas fa-leaf"></i>
                    <span>FreshMart</span>
                </div>
                <p>Your trusted online grocery store delivering fresh products right to your doorstep.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            
            <!-- Footer Links -->
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">FAQs</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                </ul>
            </div>
            
            <!-- Footer Categories -->
            <div class="footer-section">
                <h4>Categories</h4>
                <ul>
                    <li><a href="#">Fresh Fruits</a></li>
                    <li><a href="#">Vegetables</a></li>
                    <li><a href="#">Dairy & Eggs</a></li>
                    <li><a href="#">Bakery</a></li>
                    <li><a href="#">Beverages</a></li>
                </ul>
            </div>
            
            <!-- Footer Contact -->
            <div class="footer-section">
                <h4>Contact Us</h4>
                <div class="contact-info">
                    <p><i class="fas fa-phone"></i> +91 98765 43210</p>
                    <p><i class="fas fa-envelope"></i> support@freshmart.com</p>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Market Street, Mumbai, India</p>
                </div>
            </div>
        </div>
        
        <!-- Footer Bottom -->
        <div class="footer-bottom">
            <p>&copy; 2024 FreshMart. All rights reserved.</p>
        </div>
    </footer>

    <!-- ==================== TOAST NOTIFICATION ==================== -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <i class="fas fa-check-circle"></i>
            <span id="toastMessage">Item added to cart!</span>
        </div>
    </div>

    <!-- ==================== VOICE SEARCH MODAL ==================== -->
    <div class="modal" id="voiceModal">
        <div class="modal-content voice-modal-content">
            <button class="modal-close" id="closeVoiceModal">&times;</button>
            <div class="voice-animation" id="voiceAnimation">
                <div class="voice-circle"></div>
                <div class="voice-circle"></div>
                <div class="voice-circle"></div>
            </div>
            <p id="voiceStatus">Listening...</p>
            <p id="voiceResult" class="voice-result"></p>
        </div>
    </div>

    <!-- Link to external JavaScript file -->
    <script src="js/script.js"></script>
</body>
</html>

styles.css

/* ==================== CSS RESET & ROOT VARIABLES ==================== */
/* Reset default browser styles and define color palette */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Primary Colors - Green theme for freshness */
    --primary-green: #2e7d32;
    --primary-green-light: #4caf50;
    --primary-green-dark: #1b5e20;
    
    /* Secondary Colors - Orange/Yellow for warmth */
    --secondary-orange: #ff9800;
    --secondary-orange-light: #ffb74d;
    --secondary-yellow: #ffc107;
    
    /* Accent Colors */
    --accent-red: #e53935;
    --accent-blue: #1976d2;
    
    /* Neutral Colors */
    --white: #ffffff;
    --off-white: #f5f5f5;
    --light-gray: #e0e0e0;
    --medium-gray: #9e9e9e;
    --dark-gray: #424242;
    --black: #212121;
    
    /* Background Gradients */
    --gradient-primary: linear-gradient(135deg, #2e7d32 0%, #66bb6a 100%);
    --gradient-secondary: linear-gradient(135deg, #ff9800 0%, #ffb74d 100%);
    --gradient-hero: linear-gradient(135deg, #1b5e20 0%, #2e7d32 50%, #43a047 100%);
    
    /* Shadows */
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.2);
    
    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 20px;
    --radius-full: 50%;
    
    /* Transitions */
    --transition-fast: 0.2s ease;
    --transition-normal: 0.3s ease;
    --transition-slow: 0.5s ease;
}

/* ==================== BODY STYLES ==================== */
body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--off-white);
    color: var(--black);
    line-height: 1.6;
    overflow-x: hidden;
}

/* ==================== NAVBAR STYLES ==================== */
/* Main navigation bar container */
.navbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px 40px;
    background: var(--gradient-primary);
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: var(--shadow-md);
}

/* Left section of navbar: Logo and Location */
.nav-left {
    display: flex;
    align-items: center;
    gap: 25px;
}

/* Logo container styles */
.logo {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
}

/* Logo icon styling */
.logo-icon {
    font-size: 2rem;
    color: var(--white);
    animation: pulse 2s infinite;
}

/* Logo animation */
@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

/* Site name styling */
.site-name {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--white);
    letter-spacing: 1px;
}

/* Location selector button styles */
.location-selector {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 15px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: var(--transition-normal);
    color: var(--white);
}

.location-selector:hover {
    background: rgba(255, 255, 255, 0.25);
}

/* Location text container */
.location-text {
    display: flex;
    flex-direction: column;
}

.deliver-to {
    font-size: 0.7rem;
    opacity: 0.8;
}

.location-name {
    font-size: 0.85rem;
    font-weight: 600;
}

/* ==================== SEARCH BAR STYLES ==================== */
/* Center section of navbar: Search Bar */
.nav-center {
    flex: 1;
    max-width: 600px;
    margin: 0 30px;
    position: relative;
}

/* Search container */
.search-container {
    display: flex;
    align-items: center;
    background: var(--white);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    position: relative;
}

/* Scrolling suggestions above search input */
.search-suggestions {
    position: absolute;
    top: -25px;
    left: 0;
    width: 100%;
    overflow: hidden;
    height: 20px;
}

.scrolling-text {
    display: inline-block;
    white-space: nowrap;
    animation: scrollText 15s linear infinite;
    color: rgba(255, 255, 255, 0.9);
    font-size: 0.75rem;
}

@keyframes scrollText {
    0% { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
}

/* Search input field */
.search-input {
    flex: 1;
    padding: 14px 20px;
    border: none;
    outline: none;
    font-size: 0.95rem;
    font-family: inherit;
}

.search-input::placeholder {
    color: var(--medium-gray);
}

/* Voice search button */
.voice-btn {
    padding: 12px;
    background: none;
    border: none;
    color: var(--primary-green);
    cursor: pointer;
    transition: var(--transition-fast);
}

.voice-btn:hover {
    color: var(--primary-green-dark);
    transform: scale(1.1);
}

/* Language translation button */
.translate-btn {
    padding: 12px;
    background: none;
    border: none;
    color: var(--secondary-orange);
    cursor: pointer;
    transition: var(--transition-fast);
}

.translate-btn:hover {
    color: var(--secondary-orange-light);
    transform: scale(1.1);
}

/* Search submit button */
.search-btn {
    padding: 14px 20px;
    background: var(--gradient-secondary);
    border: none;
    color: var(--white);
    cursor: pointer;
    transition: var(--transition-normal);
}

.search-btn:hover {
    opacity: 0.9;
}

/* Language dropdown menu */
.language-dropdown {
    position: absolute;
    top: 100%;
    right: 50px;
    background: var(--white);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    display: none;
    z-index: 100;
    overflow: hidden;
}

.language-dropdown.show {
    display: block;
    animation: fadeIn 0.3s ease;
}

.language-option {
    padding: 12px 20px;
    cursor: pointer;
    transition: var(--transition-fast);
}

.language-option:hover {
    background: var(--off-white);
    color: var(--primary-green);
}

/* ==================== NAV RIGHT SECTION STYLES ==================== */
/* Right section of navbar: Auth, Profile, Cart */
.nav-right {
    display: flex;
    align-items: center;
    gap: 15px;
}

/* Auth button (Login/Signup) */
.auth-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: var(--white);
    border: none;
    border-radius: var(--radius-md);
    color: var(--primary-green);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-normal);
}

.auth-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

/* Profile button (shown after login) */
.profile-btn {
    width: 45px;
    height: 45px;
    border-radius: var(--radius-full);
    background: var(--white);
    border: 3px solid var(--secondary-orange);
    color: var(--primary-green);
    font-size: 1.5rem;
    cursor: pointer;
    transition: var(--transition-normal);
    display: flex;
    align-items: center;
    justify-content: center;
}

.profile-btn:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
}

/*Category image settings*/
.categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 20px;
}

.category-card {
    background: #fff;
    border-radius: 14px;
    padding: 12px;
    text-align: center;
}

.category-img {
    width: 100%;
    height: 120px;        /* THIS IS IMPORTANT */
    object-fit: cover;   /* PREVENTS IMAGE STRETCH */
    border-radius: 10px;
}

.category-name {
    display: block;
    margin-top: 8px;
    font-size: 14px;
    font-weight: 500;
}


/* Cart button */
.cart-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: var(--secondary-orange);
    border: none;
    border-radius: var(--radius-md);
    color: var(--white);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-normal);
    position: relative;
}

.cart-btn:hover {
    background: var(--secondary-orange-light);
    transform: translateY(-2px);
}

/* Cart count badge */
.cart-count {
    position: absolute;
    top: -8px;
    right: -8px;
    width: 22px;
    height: 22px;
    background: var(--accent-red);
    color: var(--white);
    border-radius: var(--radius-full);
    font-size: 0.75rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* ==================== MODAL STYLES ==================== */
/* Base modal overlay */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    backdrop-filter: blur(5px);
}

.modal.show {
    display: flex;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* Modal content container */
.modal-content {
    background: var(--white);
    border-radius: var(--radius-lg);
    padding: 30px;
    max-width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from { 
        opacity: 0;
        transform: translateY(30px);
    }
    to { 
        opacity: 1;
        transform: translateY(0);
    }
}

/* Modal close button */
.modal-close {
    position: absolute;
    top: 15px;
    right: 20px;
    width: 35px;
    height: 35px;
    border: none;
    background: var(--off-white);
    border-radius: var(--radius-full);
    font-size: 1.5rem;
    cursor: pointer;
    transition: var(--transition-fast);
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-close:hover {
    background: var(--accent-red);
    color: var(--white);
}

/* ==================== LOCATION MODAL STYLES ==================== */
.location-modal-content {
    width: 450px;
}

.location-modal-content h2 {
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--primary-green);
    margin-bottom: 25px;
}

/* Detect location button */
.detect-location-btn {
    width: 100%;
    padding: 15px;
    background: var(--gradient-primary);
    border: none;
    border-radius: var(--radius-md);
    color: var(--white);
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: var(--transition-normal);
}

.detect-location-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

/* Divider with text */
.divider {
    display: flex;
    align-items: center;
    margin: 25px 0;
}

.divider::before,
.divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--light-gray);
}

.divider span {
    padding: 0 15px;
    color: var(--medium-gray);
    font-size: 0.85rem;
}

/* ==================== AUTH MODAL STYLES ==================== 
.auth-modal-content {
    width: 420px;
} */

/* Auth header section 
.auth-header {
    text-align: center;
    margin-bottom: 30px;
}

.auth-logo {
    font-size: 3rem;
    color: var(--primary-green);
    margin-bottom: 15px;
}

.auth-header h2 {
    color: var(--black);
    margin-bottom: 5px;
}

.auth-header p {
    color: var(--medium-gray);
} */

/* Auth step containers 
.auth-step {
    animation: fadeIn 0.3s ease;
} */

/* Phone input group 
.phone-input-group {
    display: flex;
    align-items: center;
    border: 2px solid var(--light-gray);
    border-radius: var(--radius-md);
    overflow: hidden;
    transition: var(--transition-fast);
}

.phone-input-group:focus-within {
    border-color: var(--primary-green);
}

.country-code {
    padding: 12px 15px;
    background: var(--off-white);
    font-weight: 600;
    color: var(--dark-gray);
}

.phone-input-group input {
    flex: 1;
    padding: 12px 15px;
    border: none;
    outline: none;
    font-size: 1rem;
    font-family: inherit;
} */

/* OTP container 
.otp-container {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 25px 0;
} */

/* Individual OTP input box 
.otp-input {
    width: 50px;
    height: 55px;
    text-align: center;
    font-size: 1.5rem;
    font-weight: 700;
    border: 2px solid var(--light-gray);
    border-radius: var(--radius-md);
    transition: var(--transition-fast);
}

.otp-input:focus {
    border-color: var(--primary-green);
    outline: none;
}
 */
/* OTP info section 
.otp-info {
    text-align: center;
    margin-bottom: 20px;
}

.phone-display {
    font-weight: 700;
    color: var(--primary-green);
    margin: 0 10px;
} */

/* Change number button 
.change-number-btn {
    background: none;
    border: none;
    color: var(--accent-blue);
    cursor: pointer;
    font-weight: 600;
    text-decoration: underline;
} */

/* Resend OTP container *
.resend-container {
    text-align: center;
    margin-bottom: 20px;
}

.resend-btn {
    background: none;
    border: none;
    color: var(--primary-green);
    font-weight: 600;
    cursor: pointer;
}  */


/* ==================== AUTH MODAL STYLES ==================== */
/* ==================== AUTH MODAL STYLES ==================== */
.auth-modal-content {
    width: 420px;
    max-height: 90vh;
    overflow-y: auto;
}

/* Auth header section */
.auth-header {
    text-align: center;
    margin-bottom: 30px;
}

.auth-logo {
    font-size: 3rem;
    color: var(--primary-green);
    margin-bottom: 15px;
}

.auth-header h2 {
    color: var(--black);
    margin-bottom: 5px;
}

.auth-header p {
    color: var(--medium-gray);
}

/* Auth step containers */
.auth-step {
    animation: fadeIn 0.3s ease;
}

/* Auth Toggle Buttons */
.auth-toggle {
    display: flex;
    background: var(--off-white);
    border-radius: var(--radius-md);
    padding: 5px;
    margin-bottom: 25px;
}

.toggle-btn {
    flex: 1;
    padding: 12px 20px;
    border: none;
    background: transparent;
    border-radius: var(--radius-sm);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-fast);
    color: var(--medium-gray);
}

.toggle-btn.active {
    background: var(--primary-green);
    color: white;
    box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
}

.toggle-btn:hover:not(.active) {
    color: var(--primary-green);
}

/* Phone input group */
.phone-input-group {
    display: flex;
    align-items: center;
    border: 2px solid var(--light-gray);
    border-radius: var(--radius-md);
    overflow: hidden;
    transition: var(--transition-fast);
}

.phone-input-group:focus-within {
    border-color: var(--primary-green);
}

.country-code {
    padding: 12px 15px;
    background: var(--off-white);
    font-weight: 600;
    color: var(--dark-gray);
    min-width: 50px;
    text-align: center;
}

.phone-input-group input {
    flex: 1;
    padding: 12px 15px;
    border: none;
    outline: none;
    font-size: 1rem;
    font-family: inherit;
}

/* OTP container */
.otp-container {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 25px 0;
}

/* Individual OTP input box */
.otp-input {
    width: 50px;
    height: 55px;
    text-align: center;
    font-size: 1.5rem;
    font-weight: 700;
    border: 2px solid var(--light-gray);
    border-radius: var(--radius-md);
    transition: var(--transition-fast);
}

.otp-input:focus {
    border-color: var(--primary-green);
    outline: none;
}

/* OTP info section */
.otp-info {
    text-align: center;
    margin-bottom: 20px;
}

.otp-info h3 {
    color: var(--black);
    margin-bottom: 10px;
}

.otp-info p {
    color: var(--medium-gray);
    font-size: 0.95rem;
    margin-bottom: 10px;
}

.phone-display {
    font-weight: 700;
    color: var(--primary-green);
    margin: 0 10px;
}

/* Change number button */
.change-number-btn {
    background: none;
    border: none;
    color: var(--accent-blue);
    cursor: pointer;
    font-weight: 600;
    text-decoration: underline;
    font-size: 0.9rem;
}

.change-number-btn:hover {
    color: var(--primary-green);
}

/* Resend OTP container */
.resend-container {
    text-align: center;
    margin-top: 20px;
}

.resend-btn {
    background: none;
    border: none;
    color: var(--primary-green);
    font-weight: 600;
    cursor: pointer;
    font-size: 0.9rem;
}

.resend-btn:hover {
    text-decoration: underline;
}

/* Forgot Password Link */
.forgot-password-link {
    text-align: right;
    margin-top: 10px;
    margin-bottom: 20px;
}

/* Auth Divider */
.auth-divider {
    display: flex;
    align-items: center;
    margin: 25px 0;
}

.auth-divider::before,
.auth-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--light-gray);
}

.auth-divider span {
    padding: 0 15px;
    color: var(--medium-gray);
    font-size: 0.9rem;
    font-weight: 500;
}

/* Google Sign In Button */
.google-btn {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 14px 20px;
    border: 2px solid var(--light-gray);
    border-radius: var(--radius-md);
    background: white;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 600;
    color: var(--dark-gray);
    transition: var(--transition-fast);
}

.google-btn:hover {
    border-color: var(--primary-green);
    background: var(--off-white);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.google-btn img {
    width: 22px;
    height: 22px;
}

/* Error Message */
.auth-error {
    background: #ffebee;
    color: #c62828;
    padding: 12px 15px;
    border-radius: var(--radius-sm);
    margin-bottom: 15px;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 10px;
    animation: shake 0.5s ease;
}

.auth-error i {
    font-size: 1.1rem;
}

/* Success Message */
.auth-success {
    background: #e8f5e9;
    color: #2e7d32;
    padding: 12px 15px;
    border-radius: var(--radius-sm);
    margin-bottom: 15px;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 10px;
}

.auth-success i {
    font-size: 1.1rem;
}

/* Loading state for buttons */
.primary-btn.loading,
.google-btn.loading {
    pointer-events: none;
    opacity: 0.7;
}

.primary-btn.loading::after,
.google-btn.loading::after {
    content: '';
    width: 18px;
    height: 18px;
    border: 2px solid transparent;
    border-top-color: currentColor;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin-left: 10px;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

/* Hidden class */
.hidden {
    display: none !important;
}

/* Form Group */
.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--dark-gray);
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid var(--light-gray);
    border-radius: var(--radius-md);
    font-size: 1rem;
    font-family: inherit;
    transition: var(--transition-fast);
}

.form-group input:focus,
.form-group textarea:focus {
    border-color: var(--primary-green);
    outline: none;
}

.form-group textarea {
    resize: vertical;
    min-height: 100px;
}

/* ==================== AUTH TOGGLE STYLES ==================== */
.auth-toggle {
    display: flex;
    background: var(--off-white, #f5f5f5);
    border-radius: var(--radius-md, 8px);
    padding: 4px;
    margin-bottom: 25px;
}

.toggle-btn {
    flex: 1;
    padding: 12px 20px;
    border: none;
    background: transparent;
    border-radius: var(--radius-sm, 6px);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    color: var(--medium-gray, #666);
}

.toggle-btn.active {
    background: var(--primary-green, #4CAF50);
    color: white;
    box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
}

.toggle-btn:hover:not(.active) {
    color: var(--primary-green, #4CAF50);
}

/* ==================== FORGOT PASSWORD LINK ==================== */
.forgot-password-link {
    text-align: right;
    margin-top: 10px;
    margin-bottom: 20px;
}

/* ==================== AUTH DIVIDER ==================== */
.auth-divider {
    display: flex;
    align-items: center;
    margin: 25px 0;
}

.auth-divider::before,
.auth-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--light-gray, #ddd);
}

.auth-divider span {
    padding: 0 15px;
    color: var(--medium-gray, #666);
    font-size: 0.9rem;
    font-weight: 500;
}

/* ==================== GOOGLE BUTTON ==================== */
.google-btn {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 14px 20px;
    border: 2px solid var(--light-gray, #ddd);
    border-radius: var(--radius-md, 8px);
    background: white;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 600;
    color: var(--dark-gray, #333);
    transition: all 0.3s ease;
}

.google-btn:hover {
    border-color: var(--primary-green, #4CAF50);
    background: var(--off-white, #f5f5f5);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.google-btn img {
    width: 22px;
    height: 22px;
}

/* ==================== ERROR/SUCCESS MESSAGES ==================== */
.auth-error {
    background: #ffebee;
    color: #c62828;
    padding: 12px 15px;
    border-radius: var(--radius-sm, 6px);
    margin-bottom: 15px;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 10px;
    animation: shake 0.5s ease;
}

.auth-error i {
    font-size: 1.1rem;
}

.auth-success {
    background: #e8f5e9;
    color: #2e7d32;
    padding: 12px 15px;
    border-radius: var(--radius-sm, 6px);
    margin-bottom: 15px;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 10px;
}

.auth-success i {
    font-size: 1.1rem;
}

/* ==================== LOADING STATES ==================== */
.primary-btn.loading,
.google-btn.loading {
    pointer-events: none;
    opacity: 0.7;
}

.primary-btn.loading::after,
.google-btn.loading::after {
    content: '';
    width: 18px;
    height: 18px;
    border: 2px solid transparent;
    border-top-color: currentColor;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin-left: 10px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

/* ==================== OTP INFO UPDATE ==================== */
.otp-info h3 {
    color: var(--black, #000);
    margin-bottom: 10px;
}

.otp-info p {
    color: var(--medium-gray, #666);
    font-size: 0.95rem;
    margin-bottom: 10px;
}

/* ==================== HIDDEN CLASS ==================== */
.hidden {
    display: none !important;
}

/* ==================== FORM STYLES ==================== */
/* Form group container */
.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--dark-gray);
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid var(--light-gray);
    border-radius: var(--radius-md);
    font-size: 1rem;
    font-family: inherit;
    transition: var(--transition-fast);
}

.form-group input:focus,
.form-group textarea:focus {
    border-color: var(--primary-green);
    outline: none;
}

.form-group textarea {
    resize: vertical;
    min-height: 80px;
}

/* Primary button */
.primary-btn {
    width: 100%;
    padding: 15px;
    background: var(--gradient-primary);
    border: none;
    border-radius: var(--radius-md);
    color: var(--white);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-normal);
}

.primary-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.primary-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
}

/* ==================== PROFILE MODAL STYLES ==================== */
.profile-modal-content {
    width: 500px;
}

/* Ensure profile button is properly hidden/shown */
.profile-btn {
    display: none;
}

.profile-btn:not(.hidden) {
    display: flex !important;
}

.auth-btn.hidden {
    display: none !important;
}

/* Profile header */
.profile-header {
    text-align: center;
    padding-bottom: 25px;
    border-bottom: 1px solid var(--light-gray);
    margin-bottom: 25px;
}

.profile-avatar {
    width: 100px;
    height: 100px;
    background: var(--gradient-primary);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
}

.profile-avatar i {
    font-size: 3rem;
    color: var(--white);
}

.profile-header h2 {
    color: var(--black);
    margin-bottom: 10px;
}

/* Edit profile button */
.edit-profile-btn {
    padding: 8px 20px;
    background: var(--off-white);
    border: none;
    border-radius: var(--radius-md);
    color: var(--primary-green);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-fast);
}

.edit-profile-btn:hover {
    background: var(--primary-green);
    color: var(--white);
}

/* Profile details section */
.profile-details {
    margin-bottom: 25px;
}

/* Detail item row */
.detail-item {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: 15px;
    background: var(--off-white);
    border-radius: var(--radius-md);
    margin-bottom: 10px;
}

.detail-item i {
    font-size: 1.2rem;
    color: var(--primary-green);
    margin-top: 3px;
}

.detail-content {
    display: flex;
    flex-direction: column;
}

.detail-label {
    font-size: 0.8rem;
    color: var(--medium-gray);
}

.detail-value {
    font-weight: 500;
    color: var(--black);
}

/* My orders section */
.my-orders-section {
    margin-top: 25px;
}

.my-orders-section h3 {
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--primary-green);
    margin-bottom: 15px;
}

.orders-list {
    max-height: 200px;
    overflow-y: auto;
}

.no-orders {
    text-align: center;
    padding: 30px;
    color: var(--medium-gray);
}

.no-orders i {
    font-size: 2.5rem;
    margin-bottom: 10px;
}

/* Order item */
.order-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    background: var(--off-white);
    border-radius: var(--radius-md);
    margin-bottom: 10px;
}

.order-info h4 {
    font-size: 0.9rem;
    margin-bottom: 5px;
}

.order-date {
    font-size: 0.8rem;
    color: var(--medium-gray);
}

.order-status {
    padding: 5px 12px;
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
}

.order-status.delivered {
    background: #d4edda;
    color: #155724;
}

.order-status.pending {
    background: #fff3cd;
    color: #856404;
}

/* Logout button */
.logout-btn {
    width: 100%;
    padding: 12px;
    background: none;
    border: 2px solid var(--accent-red);
    border-radius: var(--radius-md);
    color: var(--accent-red);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-fast);
    margin-top: 20px;
}

.logout-btn:hover {
    background: var(--accent-red);
    color: var(--white);
}

/* ==================== CART MODAL STYLES ==================== */
.cart-modal-content {
    width: 450px;
}

/* Cart header */
.cart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--light-gray);
    margin-bottom: 20px;
}

.cart-header h2 {
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--primary-green);
}

.cart-items-count {
    color: var(--medium-gray);
}

.cart-btn {
    position: relative;
}

.cart-count {
    position: absolute;
    top: -6px;
    right: -6px;
    background: red;
    color: white;
    font-size: 12px;
    font-weight: bold;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}


/* Cart items container */
.cart-items {
    max-height: 300px;
    overflow-y: auto;
    margin-bottom: 20px;
}

/* Empty cart state */
.empty-cart {
    text-align: center;
    padding: 40px 20px;
    color: var(--medium-gray);
}

.empty-cart i {
    font-size: 3rem;
    margin-bottom: 15px;
    color: var(--light-gray);
}

.empty-cart p {
    font-weight: 600;
    color: var(--dark-gray);
    margin-bottom: 5px;
}

/* Individual cart item */
.cart-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: var(--off-white);
    border-radius: var(--radius-md);
    margin-bottom: 10px;
}

.cart-item-image {
    width: 70px;
    height: 70px;
    border-radius: var(--radius-sm);
    object-fit: cover;
}

.cart-item-details {
    flex: 1;
}

.cart-item-name {
    font-weight: 600;
    margin-bottom: 5px;
}

.cart-item-price {
    color: var(--primary-green);
    font-weight: 700;
}

.cart-item-weight {
    font-size: 0.8rem;
    color: var(--medium-gray);
}

/* Quantity controls */
.quantity-controls {
    display: flex;
    align-items: center;
    gap: 10px;
}

.quantity-btn {
    width: 30px;
    height: 30px;
    border: none;
    background: var(--primary-green);
    color: var(--white);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 1rem;
    transition: var(--transition-fast);
}

.quantity-btn:hover {
    background: var(--primary-green-dark);
}

.quantity {
    font-weight: 600;
    min-width: 25px;
    text-align: center;
}

/* Remove item button */
.remove-item {
    background: none;
    border: none;
    color: var(--accent-red);
    cursor: pointer;
    padding: 5px;
    transition: var(--transition-fast);
}

.remove-item:hover {
    transform: scale(1.2);
}

/* Cart summary */
.cart-summary {
    padding-top: 20px;
    border-top: 1px solid var(--light-gray);
}

.summary-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    color: var(--dark-gray);
}

.summary-row.discount {
    color: var(--primary-green);
}

.summary-row.total {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--black);
    padding-top: 10px;
    border-top: 1px dashed var(--light-gray);
}

/* Checkout button */
.checkout-btn {
    width: 100%;
    padding: 15px;
    background: var(--gradient-secondary);
    border: none;
    border-radius: var(--radius-md);
    color: var(--white);
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    margin-top: 20px;
    transition: var(--transition-normal);
}

.checkout-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

/* ==================== HERO SECTION STYLES ==================== */
.hero-section {
    background: var(--gradient-hero);
    padding: 60px 40px 120px;
    position: relative;
    overflow: hidden;
}

.hero-content {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: center;
}

/* Hero text content */
.hero-text {
    color: var(--white);
}

.hero-text h1 {
    font-size: 3.5rem;
    line-height: 1.2;
    margin-bottom: 20px;
}

.hero-text h1 .highlight {
    color: var(--secondary-yellow);
    position: relative;
}

.hero-text p {
    font-size: 1.2rem;
    opacity: 0.9;
    margin-bottom: 30px;
    max-width: 500px;
}

/* Hero features */
.hero-features {
    display: flex;
    gap: 30px;
    margin-bottom: 40px;
}

.feature {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 20px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: var(--radius-md);
}

.feature i {
    font-size: 1.3rem;
    color: var(--secondary-yellow);
}

.feature span {
    font-weight: 500;
}

/* Hero CTA button */
.hero-cta {
    padding: 18px 40px;
    background: var(--secondary-orange);
    border: none;
    border-radius: var(--radius-lg);
    color: var(--white);
    font-size: 1.2rem;
    font-weight: 700;
    cursor: pointer;
    transition: var(--transition-normal);
    display: inline-flex;
    align-items: center;
    gap: 10px;
}

.hero-cta:hover {
    background: var(--secondary-orange-light);
    transform: translateY(-3px);
    box-shadow: var(--shadow-lg);
}

/* Hero image */
.hero-image {
    position: relative;
}

.hero-image img {
    width: 100%;
    max-width: 500px;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
}

/* Floating cards */
.floating-card {
    position: absolute;
    background: var(--white);
    padding: 15px 20px;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
    display: flex;
    align-items: center;
    gap: 10px;
    animation: float 3s ease-in-out infinite;
}

.floating-card i {
    font-size: 1.5rem;
    color: var(--primary-green);
}

.floating-card span {
    font-weight: 600;
    color: var(--dark-gray);
}

.card-1 {
    top: 20px;
    right: -20px;
    animation-delay: 0s;
}

.card-2 {
    bottom: 80px;
    left: -30px;
    animation-delay: 1s;
}

.card-3 {
    bottom: 20px;
    right: 50px;
    animation-delay: 2s;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

/* Hero wave decoration */
.hero-wave {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
}

.hero-wave svg {
    display: block;
    width: 100%;
    height: auto;
}

/* ==================== SECTION STYLES ==================== */
.section-header {
    text-align: center;
    margin-bottom: 50px;
}

.section-header h2 {
    font-size: 2.5rem;
    color: var(--black);
    margin-bottom: 10px;
}

.section-header p {
    color: var(--medium-gray);
    font-size: 1.1rem;
}

/* ==================== CATEGORIES SECTION ==================== */
.categories-section {
    padding: 80px 40px;
    background: var(--white);
}

.categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 25px;
    max-width: 1200px;
    margin: 0 auto;
}

/* Category card */
.category-card {
    text-align: center;
    padding: 30px 20px;
    background: var(--off-white);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: var(--transition-normal);
}

.category-card:hover {
    transform: translateY(-10px);
    box-shadow: var(--shadow-md);
}

.category-icon {
    width: 80px;
    height: 80px;
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
}

.category-icon i {
    font-size: 2rem;
    color: var(--white);
}

.category-name {
    font-weight: 600;
    color: var(--dark-gray);
}

/* ==================== PRODUCTS SECTION ==================== */
.products-section {
    padding: 80px 40px;
    background: var(--off-white);
}

.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 30px;
    max-width: 1400px;
    margin: 0 auto;
}

/* Product card */
.product-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    transition: var(--transition-normal);
    position: relative;
}

.product-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-md);
}

/* Product discount badge */
.product-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    padding: 5px 12px;
    background: var(--accent-red);
    color: var(--white);
    font-size: 0.8rem;
    font-weight: 700;
    border-radius: var(--radius-sm);
}

/* Wishlist button */
.wishlist-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 35px;
    height: 35px;
    background: var(--white);
    border: none;
    border-radius: var(--radius-full);
    cursor: pointer;
    transition: var(--transition-fast);
    box-shadow: var(--shadow-sm);
}

.wishlist-btn:hover {
    color: var(--accent-red);
    transform: scale(1.1);
}

.wishlist-btn.active {
    color: var(--accent-red);
}

/* Product image */
.product-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

/* Product info */
.product-info {
    padding: 20px;
}

.product-category {
    font-size: 0.8rem;
    color: var(--primary-green);
    text-transform: uppercase;
    font-weight: 600;
    margin-bottom: 5px;
}

.product-name {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--black);
    margin-bottom: 5px;
}

.product-weight {
    font-size: 0.85rem;
    color: var(--medium-gray);
    margin-bottom: 15px;
}

.product-price-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.product-price {
    display: flex;
    align-items: center;
    gap: 10px;
}

.current-price {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--primary-green);
}

.original-price {
    font-size: 0.95rem;
    color: var(--medium-gray);
    text-decoration: line-through;
}

/* Add to cart button */
.add-to-cart {
    padding: 10px 20px;
    background: var(--gradient-primary);
    border: none;
    border-radius: var(--radius-md);
    color: var(--white);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-normal);
}

.add-to-cart:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-sm);
}

/* ==================== OFFERS SECTION ==================== */
.offers-section {
    padding: 80px 40px;
    background: var(--white);
}

.offers-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
}

/* Offer card */
.offer-card {
    border-radius: var(--radius-lg);
    overflow: hidden;
    display: flex;
    align-items: center;
    padding: 30px;
    position: relative;
    min-height: 200px;
}

.offer-1 {
    background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
}

.offer-2 {
    background: linear-gradient(135deg, #51cf66, #69db7c);
}

.offer-3 {
    background: linear-gradient(135deg, #ffd43b, #ffe066);
}

.offer-content {
    color: var(--white);
    z-index: 1;
}

.offer-tag {
    display: inline-block;
    padding: 5px 15px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: var(--radius-sm);
    font-weight: 700;
    margin-bottom: 15px;
}

.offer-content h3 {
    font-size: 1.8rem;
    margin-bottom: 5px;
}

.offer-content p {
    opacity: 0.9;
    margin-bottom: 20px;
}

.offer-btn {
    padding: 10px 25px;
    background: var(--white);
    border: none;
    border-radius: var(--radius-md);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-normal);
}

.offer-1 .offer-btn {
    color: #ff6b6b;
}

.offer-2 .offer-btn {
    color: #51cf66;
}

.offer-3 .offer-btn {
    color: #ffd43b;
}

.offer-btn:hover {
    transform: scale(1.05);
}

.offer-card img {
    position: absolute;
    right: -20px;
    bottom: -20px;
    width: 180px;
    height: 180px;
    object-fit: cover;
    border-radius: var(--radius-full);
    opacity: 0.3;
}

/* ==================== WHY US SECTION ==================== */
.why-us-section {
    padding: 80px 40px;
    background: var(--gradient-hero);
}

.why-us-section .section-header h2,
.why-us-section .section-header p {
    color: var(--white);
}

.why-us-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
}

/* Why us card */
.why-us-card {
    background: var(--white);
    padding: 40px 30px;
    border-radius: var(--radius-lg);
    text-align: center;
    transition: var(--transition-normal);
}

.why-us-card:hover {
    transform: translateY(-10px);
    box-shadow: var(--shadow-lg);
}

.why-us-icon {
    width: 80px;
    height: 80px;
    background: var(--gradient-primary);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
}

.why-us-icon i {
    font-size: 2rem;
    color: var(--white);
}

.why-us-card h3 {
    color: var(--primary-green);
    margin-bottom: 10px;
}

.why-us-card p {
    color: var(--medium-gray);
}

/* ==================== FOOTER STYLES ==================== */
.footer {
    background: var(--black);
    color: var(--white);
    padding: 60px 40px 20px;
}

.footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 40px;
    max-width: 1400px;
    margin: 0 auto 40px;
}

/* Footer logo */
.footer-logo {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 15px;
}

.footer-logo i {
    color: var(--primary-green-light);
}

.footer-section p {
    color: var(--medium-gray);
    margin-bottom: 20px;
}

/* Social links */
.social-links {
    display: flex;
    gap: 15px;
}

.social-links a {
    width: 40px;
    height: 40px;
    background: var(--dark-gray);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    transition: var(--transition-fast);
}

.social-links a:hover {
    background: var(--primary-green);
    transform: translateY(-3px);
}

.footer-section h4 {
    margin-bottom: 20px;
    color: var(--white);
}

.footer-section ul {
    list-style: none;
}

.footer-section ul li {
    margin-bottom: 10px;
}

.footer-section ul a {
    color: var(--medium-gray);
    text-decoration: none;
    transition: var(--transition-fast);
}

.footer-section ul a:hover {
    color: var(--primary-green-light);
}

/* Contact info */
.contact-info p {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
}

.contact-info i {
    color: var(--primary-green-light);
}

/* Footer bottom */
.footer-bottom {
    text-align: center;
    padding-top: 20px;
    border-top: 1px solid var(--dark-gray);
    color: var(--medium-gray);
}

/* ==================== TOAST NOTIFICATION ==================== */
.toast {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: var(--primary-green);
    color: var(--white);
    padding: 15px 25px;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    transform: translateX(150%);
    transition: var(--transition-normal);
    z-index: 3000;
}

.toast.show {
    transform: translateX(0);
}

.toast-content {
    display: flex;
    align-items: center;
    gap: 10px;
}

.toast-content i {
    font-size: 1.2rem;
}

/* ==================== VOICE MODAL STYLES ==================== */
.voice-modal-content {
    width: 350px;
    text-align: center;
    padding: 50px 30px;
}

.voice-animation {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 30px;
}

.voice-circle {
    width: 20px;
    height: 20px;
    background: var(--primary-green);
    border-radius: var(--radius-full);
    animation: voicePulse 1s ease-in-out infinite;
}

.voice-circle:nth-child(2) {
    animation-delay: 0.2s;
}

.voice-circle:nth-child(3) {
    animation-delay: 0.4s;
}

@keyframes voicePulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.5); opacity: 0.5; }
}

.voice-result {
    margin-top: 20px;
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--primary-green);
}

/* ==================== UTILITY CLASSES ==================== */
.hidden {
    display: none !important;
}

/* ==================== RESPONSIVE STYLES ==================== */
@media (max-width: 1024px) {
    .hero-content {
        grid-template-columns: 1fr;
        text-align: center;
    }
    
    .hero-text {
        order: 1;
    }
    
    .hero-image {
        order: 0;
        display: flex;
        justify-content: center;
    }
    
    .hero-text p {
        margin: 0 auto 30px;
    }
    
    .hero-features {
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .floating-card {
        display: none;
    }
}

@media (max-width: 768px) {
    /* Navbar responsive */
    .navbar {
        flex-wrap: wrap;
        padding: 15px 20px;
        gap: 15px;
    }
    
    .nav-left {
        width: 100%;
        justify-content: space-between;
    }
    
    .nav-center {
        order: 3;
        width: 100%;
        margin: 0;
        max-width: none;
    }
    
    .nav-right {
        order: 2;
    }
    
    .location-selector {
        padding: 5px 10px;
    }
    
    .deliver-to {
        display: none;
    }
    
    .cart-text {
        display: none;
    }
    
    /* Hero responsive */
    .hero-section {
        padding: 40px 20px 100px;
    }
    
    .hero-text h1 {
        font-size: 2.2rem;
    }
    
    .hero-text p {
        font-size: 1rem;
    }
    
    .hero-image img {
        max-width: 100%;
    }
    
    /* Section responsive */
    .categories-section,
    .products-section,
    .offers-section,
    .why-us-section {
        padding: 50px 20px;
    }
    
    .section-header h2 {
        font-size: 1.8rem;
    }
    
    .offers-grid {
        grid-template-columns: 1fr;
    }
    
    /* Modal responsive */
    .modal-content {
        margin: 20px;
        width: calc(100% - 40px);
    }
    
    .auth-modal-content,
    .profile-modal-content,
    .cart-modal-content,
    .location-modal-content {
        width: calc(100% - 40px);
    }
}

@media (max-width: 480px) {
    .site-name {
        font-size: 1.4rem;
    }
    
    .auth-btn span {
        display: none;
    }
    
    .otp-input {
        width: 40px;
        height: 45px;
        font-size: 1.2rem;
    }
    
    .hero-features {
        flex-direction: column;
        align-items: center;
    }
    
    .feature {
        width: 100%;
        justify-content: center;
    }
}
script.js

// ==================== FRESHMART JAVASCRIPT ====================
// Main JavaScript file for FreshMart Online Grocery Store
// Firebase Authentication Integration

// ==================== FIREBASE CONFIGURATION ====================
const firebaseConfig = {
    apiKey: "AIzaSyDf4QSE3kw9HQD_ZWJ-DDZ8yN3hgRp4UaM",
    authDomain: "otp-auth-ff7fb.firebaseapp.com",
    projectId: "otp-auth-ff7fb",
    storageBucket: "otp-auth-ff7fb.firebasestorage.app",
    messagingSenderId: "945314024888",
    appId: "1:945314024888:web:1eb577611a4de09757934d",
    measurementId: "G-6HMXTKV0SQ"
};

// Initialize Firebase (if not already initialized)
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}
const auth = firebase.auth();

// ==================== PRODUCT DATA ====================
const products = [
    {
        id: 1,
        name: "Fresh Red Apples",
        category: "fruits",
        price: 149,
        originalPrice: 199,
        weight: "1 kg",
        image: "https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6?w=400",
        discount: 25,
        inStock: true
    },
    {
        id: 2,
        name: "Organic Bananas",
        category: "fruits",
        price: 49,
        originalPrice: 60,
        weight: "1 dozen",
        image: "https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?w=400",
        discount: 18,
        inStock: true
    },
    {
        id: 3,
        name: "Fresh Tomatoes",
        category: "vegetables",
        price: 35,
        originalPrice: 45,
        weight: "500 g",
        image: "https://i0.wp.com/images-prod.healthline.com/hlcmsresource/images/AN_images/tomatoes-1296x728-feature.jpg?w=1155&h=15280",
        discount: 22,
        inStock: true
    },
    {
        id: 4,
        name: "Green Spinach",
        category: "vegetables",
        price: 25,
        originalPrice: 30,
        weight: "250 g",
        image: "https://images.unsplash.com/photo-1576045057995-568f588f82fb?w=400",
        discount: 17,
        inStock: true
    },
    {
        id: 5,
        name: "Farm Fresh Milk",
        category: "dairy",
        price: 62,
        originalPrice: 68,
        weight: "1 L",
        image: "https://images.unsplash.com/photo-1563636619-e9143da7973b?w=400",
        discount: 9,
        inStock: true
    },
    {
        id: 6,
        name: "Organic Eggs",
        category: "dairy",
        price: 89,
        originalPrice: 110,
        weight: "12 pcs",
        image: "https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?w=400",
        discount: 19,
        inStock: true
    },
    {
        id: 7,
        name: "Whole Wheat Bread",
        category: "bakery",
        price: 45,
        originalPrice: 55,
        weight: "400 g",
        image: "https://images.unsplash.com/photo-1509440159596-0249088772ff?w=400",
        discount: 18,
        inStock: true
    },
    {
        id: 8,
        name: "Fresh Orange Juice",
        category: "beverages",
        price: 120,
        originalPrice: 150,
        weight: "1 L",
        image: "https://images.unsplash.com/photo-1621506289937-a8e4df240d0b?w=400",
        discount: 20,
        inStock: true
    },
    {
        id: 9,
        name: "Potato Chips",
        category: "snacks",
        price: 30,
        originalPrice: 35,
        weight: "150 g",
        image: "https://images.unsplash.com/photo-1566478989037-eec170784d0b?w=400",
        discount: 14,
        inStock: true
    },
    {
        id: 10,
        name: "Chicken Breast",
        category: "meat",
        price: 280,
        originalPrice: 350,
        weight: "500 g",
        image: "https://images.unsplash.com/photo-1604503468506-a8da13d82791?w=400",
        discount: 20,
        inStock: true
    },
    {
        id: 11,
        name: "Frozen Peas",
        category: "frozen",
        price: 85,
        originalPrice: 100,
        weight: "500 g",
        image: "https://images.unsplash.com/photo-1587735243615-c03f25aaff15?w=400",
        discount: 15,
        inStock: true
    },
    {
        id: 12,
        name: "Greek Yogurt",
        category: "dairy",
        price: 75,
        originalPrice: 90,
        weight: "400 g",
        image: "https://images.unsplash.com/photo-1488477181946-6428a0291777?w=400",
        discount: 17,
        inStock: true
    },
    {
        id: 13,
        name: "Fresh Mangoes",
        category: "fruits",
        price: 199,
        originalPrice: 250,
        weight: "1 kg",
        image: "https://images.unsplash.com/photo-1553279768-865429fa0078?w=400",
        discount: 20,
        inStock: true
    },
    {
        id: 14,
        name: "Broccoli",
        category: "vegetables",
        price: 65,
        originalPrice: 80,
        weight: "500 g",
        image: "https://images.unsplash.com/photo-1459411552884-841db9b3cc2a?w=400",
        discount: 19,
        inStock: true
    },
    {
        id: 15,
        name: "Chocolate Cookies",
        category: "snacks",
        price: 55,
        originalPrice: 70,
        weight: "200 g",
        image: "https://images.unsplash.com/photo-1499636136210-6f4ee915583e?w=400",
        discount: 21,
        inStock: true
    },
    {
        id: 16,
        name: "Green Tea",
        category: "beverages",
        price: 180,
        originalPrice: 220,
        weight: "100 bags",
        image: "https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=400",
        discount: 18,
        inStock: true
    }
];

// ==================== TRANSLATION DATA ====================
const translations = {
    en: {
        searchPlaceholder: "Search for groceries...",
        deliverTo: "Deliver to",
        selectLocation: "Select Location",
        loginSignup: "Login/Signup",
        cart: "Cart",
        shopByCategory: "Shop by Category",
        browseCategories: "Browse through our wide range of categories",
        featuredProducts: "Featured Products",
        bestQuality: "Best quality groceries at best prices",
        addToCart: "Add",
        todaysBestDeals: "Today's Best Deals",
        dontMissOut: "Don't miss out on these amazing offers",
        whyChoose: "Why Choose FreshMart?",
        committed: "We're committed to bringing you the best shopping experience",
        freshProducts: "100% Fresh Products",
        expressDelivery: "Express Delivery",
        bestPrices: "Best Prices",
        support: "24/7 Support",
        myCart: "My Cart",
        items: "items",
        emptyCart: "Your cart is empty",
        addItems: "Add items to get started",
        subtotal: "Subtotal",
        deliveryFee: "Delivery Fee",
        discount: "Discount",
        total: "Total",
        checkout: "Proceed to Checkout",
        welcome: "Welcome to FreshMart",
        loginContinue: "Login or Signup to continue",
        fullName: "Full Name",
        emailAddress: "Email Address",
        deliveryAddress: "Delivery Address",
        saveAndContinue: "Save & Continue",
        selectDeliveryLocation: "Select Delivery Location",
        detectLocation: "Detect my location",
        enterAddress: "Enter your address",
        pincode: "Pincode",
        saveLocation: "Save Location",
        editProfile: "Edit Profile",
        myOrders: "My Orders",
        noOrders: "No orders yet",
        logout: "Logout"
    },
    hi: {
        searchPlaceholder: "किराना खोजें...",
        deliverTo: "यहाँ डिलीवर करें",
        selectLocation: "स्थान चुनें",
        loginSignup: "लॉगिन/साइनअप",
        cart: "कार्ट",
        shopByCategory: "श्रेणी के अनुसार खरीदारी करें",
        browseCategories: "हमारी विस्तृत श्रेणियों को ब्राउज़ करें",
        featuredProducts: "विशेष उत्पाद",
        bestQuality: "सर्वोत्तम मूल्यों पर सर्वोत्तम गुणवत्ता",
        addToCart: "जोड़ें",
        todaysBestDeals: "आज के सर्वश्रेष्ठ सौदे",
        dontMissOut: "इन शानदार ऑफर्स को न चूकें",
        whyChoose: "FreshMart क्यों चुनें?",
        committed: "हम आपको सर्वोत्तम खरीदारी अनुभव देने के लिए प्रतिबद्ध हैं",
        freshProducts: "100% ताज़ा उत्पाद",
        expressDelivery: "एक्सप्रेस डिलीवरी",
        bestPrices: "सर्वोत्तम मूल्य",
        support: "24/7 सहायता",
        myCart: "मेरी कार्ट",
        items: "आइटम",
        emptyCart: "आपकी कार्ट खाली है",
        addItems: "शुरू करने के लिए आइटम जोड़ें",
        subtotal: "उप-योग",
        deliveryFee: "डिलीवरी शुल्क",
        discount: "छूट",
        total: "कुल",
        checkout: "चेकआउट करें",
        welcome: "FreshMart में आपका स्वागत है",
        loginContinue: "जारी रखने के लिए लॉगिन या साइनअप करें",
        fullName: "पूरा नाम",
        emailAddress: "ईमेल पता",
        deliveryAddress: "डिलीवरी पता",
        saveAndContinue: "सहेजें और जारी रखें",
        selectDeliveryLocation: "डिलीवरी स्थान चुनें",
        detectLocation: "मेरा स्थान पता लगाएं",
        enterAddress: "अपना पता दर्ज करें",
        pincode: "पिनकोड",
        saveLocation: "स्थान सहेजें",
        editProfile: "प्रोफ़ाइल संपादित करें",
        myOrders: "मेरे ऑर्डर",
        noOrders: "अभी तक कोई ऑर्डर नहीं",
        logout: "लॉगआउट"
    },
    te: {
        searchPlaceholder: "కిరాణా కోసం వెతకండి...",
        deliverTo: "ఇక్కడ డెలివరీ చేయండి",
        selectLocation: "స్థానం ఎంచుకోండి",
        loginSignup: "లాగిన్/సైనప్",
        cart: "కార్ట్",
        shopByCategory: "వర్గం ద్వారా షాపింగ్ చేయండి",
        browseCategories: "మా విస్తృత వర్గాలను బ్రౌజ్ చేయండి",
        featuredProducts: "ఫీచర్డ్ ఉత్పత్తులు",
        bestQuality: "ఉత్తమ ధరలకు ఉత్తమ నాణ్యత",
        addToCart: "జోడించు",
        myCart: "నా కార్ట్",
        items: "ఐటెమ్స్",
        emptyCart: "మీ కార్ట్ ఖాళీగా ఉంది",
        checkout: "చెక్అవుట్ కొనసాగించండి"
    },
    ta: {
        searchPlaceholder: "மளிகை தேடுங்கள்...",
        deliverTo: "இங்கே டெலிவரி",
        selectLocation: "இடத்தைத் தேர்ந்தெடுக்கவும்",
        loginSignup: "உள்நுழை/பதிவு செய்",
        cart: "கார்ட்",
        shopByCategory: "வகை வாரியாக ஷாப்பிங்",
        browseCategories: "எங்கள் பரந்த வகைகளை உலாவுங்கள்",
        featuredProducts: "சிறப்பு தயாரிப்புகள்",
        bestQuality: "சிறந்த விலையில் சிறந்த தரம்",
        addToCart: "சேர்",
        myCart: "என் கார்ட்",
        items: "பொருட்கள்",
        emptyCart: "உங்கள் கார்ட் காலியாக உள்ளது",
        checkout: "செக்அவுட் செய்யவும்"
    },
    es: {
        searchPlaceholder: "Buscar comestibles...",
        deliverTo: "Entregar a",
        selectLocation: "Seleccionar ubicación",
        loginSignup: "Iniciar sesión/Registrarse",
        cart: "Carrito",
        shopByCategory: "Comprar por categoría",
        browseCategories: "Explora nuestra amplia gama de categorías",
        featuredProducts: "Productos Destacados",
        bestQuality: "La mejor calidad a los mejores precios",
        addToCart: "Añadir",
        myCart: "Mi Carrito",
        items: "artículos",
        emptyCart: "Tu carrito está vacío",
        checkout: "Proceder al pago"
    },
    fr: {
        searchPlaceholder: "Rechercher des produits...",
        deliverTo: "Livrer à",
        selectLocation: "Sélectionner l'emplacement",
        loginSignup: "Connexion/Inscription",
        cart: "Panier",
        shopByCategory: "Acheter par catégorie",
        browseCategories: "Parcourez notre large gamme de catégories",
        featuredProducts: "Produits en Vedette",
        bestQuality: "La meilleure qualité aux meilleurs prix",
        addToCart: "Ajouter",
        myCart: "Mon Panier",
        items: "articles",
        emptyCart: "Votre panier est vide",
        checkout: "Passer à la caisse"
    }
};

// ==================== SEARCH SUGGESTIONS ====================
const searchSuggestions = [
    "🍎 Fresh Apples",
    "🥛 Farm Fresh Milk",
    "🍞 Whole Wheat Bread",
    "🥬 Organic Vegetables",
    "🧀 Dairy Products",
    "🍊 Juicy Oranges",
    "🥚 Free Range Eggs",
    "🍌 Organic Bananas"
];

// ==================== STATE MANAGEMENT ====================
let cart = [];
let wishlist = [];
let currentUser = null;
let currentLanguage = 'en';
let currentLocation = null;
let isFirebaseLoggedIn = false;

// ==================== DOM ELEMENTS ====================
const DOM = {
    navbar: document.getElementById('navbar'),
    locationBtn: document.getElementById('locationBtn'),
    currentLocationSpan: document.getElementById('currentLocation'),
    searchInput: document.getElementById('searchInput'),
    searchBtn: document.getElementById('searchBtn'),
    voiceBtn: document.getElementById('voiceBtn'),
    translateBtn: document.getElementById('translateBtn'),
    languageDropdown: document.getElementById('languageDropdown'),
    authBtn: document.getElementById('authBtn'),
    profileBtn: document.getElementById('profileBtn'),
    cartBtn: document.getElementById('cartBtn'),
    cartCount: document.getElementById('cartCount'),
    scrollingText: document.getElementById('scrollingText'),
    
    locationModal: document.getElementById('locationModal'),
    closeLocationModal: document.getElementById('closeLocationModal'),
    detectLocationBtn: document.getElementById('detectLocationBtn'),
    manualAddress: document.getElementById('manualAddress'),
    pincode: document.getElementById('pincode'),
    saveLocationBtn: document.getElementById('saveLocationBtn'),
    
    cartModal: document.getElementById('cartModal'),
    closeCartModal: document.getElementById('closeCartModal'),
    cartItemsCount: document.getElementById('cartItemsCount'),
    cartItems: document.getElementById('cartItems'),
    emptyCart: document.getElementById('emptyCart'),
    cartSummary: document.getElementById('cartSummary'),
    subtotal: document.getElementById('subtotal'),
    deliveryFee: document.getElementById('deliveryFee'),
    discount: document.getElementById('discount'),
    totalAmount: document.getElementById('totalAmount'),
    checkoutBtn: document.getElementById('checkoutBtn'),
    
    voiceModal: document.getElementById('voiceModal'),
    closeVoiceModal: document.getElementById('closeVoiceModal'),
    voiceStatus: document.getElementById('voiceStatus'),
    voiceResult: document.getElementById('voiceResult'),
    voiceAnimation: document.getElementById('voiceAnimation'),
    
    productsGrid: document.getElementById('productsGrid'),
    categoryCards: document.querySelectorAll('.category-card'),
    toast: document.getElementById('toast'),
    toastMessage: document.getElementById('toastMessage'),
    shopNowBtn: document.getElementById('shopNowBtn'),
    offerBtns: document.querySelectorAll('.offer-btn')
};

// ==================== AUTH STATE MANAGEMENT ====================
auth.onAuthStateChanged((user) => {
    const currentPage = window.location.pathname;
    if (currentPage.includes('login.html') || currentPage.includes('signup.html')) {
        return;
    }
    
    if (user) {
        isFirebaseLoggedIn = true;
        console.log('✅ Firebase User logged in:', user.email);
        
        const savedUser = localStorage.getItem('freshmart_user');
        if (savedUser) {
            currentUser = JSON.parse(savedUser);
        } else {
            currentUser = {
                uid: user.uid,
                name: user.displayName || 'User',
                email: user.email,
                phone: '',
                photo: user.photoURL || ''
            };
            localStorage.setItem('freshmart_user', JSON.stringify(currentUser));
        }
        
        // Force immediate UI update
        requestAnimationFrame(() => {
            updateAuthUI();
            updateCartCount();
        });
        
        // Show welcome message if coming from login
        const referrer = document.referrer;
        if (referrer && (referrer.includes('login.html') || referrer.includes('signup.html'))) {
            setTimeout(() => {
                showToast(`Welcome, ${currentUser?.name || 'User'}!`, 'success');
            }, 300);
        }
        
    } else {
        isFirebaseLoggedIn = false;
        currentUser = null;
        console.log('❌ Firebase User not logged in');
        
        requestAnimationFrame(() => {
            updateAuthUI();
            updateCartCount();
        });
    }
});

// ==================== INITIALIZATION ====================
document.addEventListener('DOMContentLoaded', function() {
    loadFromLocalStorage();
    initScrollingText();
    renderProducts();
    
    // Check auth state immediately on page load
    const user = auth.currentUser;
    if (user) {
        isFirebaseLoggedIn = true;
        const savedUser = localStorage.getItem('freshmart_user');
        if (savedUser) {
            currentUser = JSON.parse(savedUser);
        }
    }
    
    updateUI();
    updateAuthUI();
    setupEventListeners();
    
    console.log('FreshMart initialized successfully!');
});

// ==================== LOCAL STORAGE FUNCTIONS ====================
function loadFromLocalStorage() {
    try {
        const savedCart = localStorage.getItem('freshmart_cart');
        if (savedCart) cart = JSON.parse(savedCart);
        
        const savedWishlist = localStorage.getItem('freshmart_wishlist');
        if (savedWishlist) wishlist = JSON.parse(savedWishlist);
        
        const savedUser = localStorage.getItem('freshmart_user');
        if (savedUser) currentUser = JSON.parse(savedUser);
        
        const savedLocation = localStorage.getItem('freshmart_location');
        if (savedLocation) currentLocation = JSON.parse(savedLocation);
        
        const savedLanguage = localStorage.getItem('freshmart_language');
        if (savedLanguage) currentLanguage = savedLanguage;
    } catch (e) {
        console.error('Error loading from localStorage:', e);
    }
}

function saveCartToLocalStorage() {
    localStorage.setItem('freshmart_cart', JSON.stringify(cart));
}

function saveWishlistToLocalStorage() {
    localStorage.setItem('freshmart_wishlist', JSON.stringify(wishlist));
}

function saveUserToLocalStorage() {
    localStorage.setItem('freshmart_user', JSON.stringify(currentUser));
}

function saveLocationToLocalStorage() {
    localStorage.setItem('freshmart_location', JSON.stringify(currentLocation));
}

function saveLanguageToLocalStorage() {
    localStorage.setItem('freshmart_language', currentLanguage);
}

// ==================== EVENT LISTENERS SETUP ====================
function setupEventListeners() {
    // Location button
    DOM.locationBtn?.addEventListener('click', openLocationModal);
    
    // Search
    DOM.searchBtn?.addEventListener('click', performSearch);
    DOM.searchInput?.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') performSearch();
    });
    
    // Voice search
    DOM.voiceBtn?.addEventListener('click', startVoiceSearch);
    
    // Language
    DOM.translateBtn?.addEventListener('click', toggleLanguageDropdown);
    document.querySelectorAll('.language-option').forEach(option => {
        option.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');
            changeLanguage(lang);
        });
    });
    
    // Auth button - go to login page
    DOM.authBtn?.addEventListener('click', () => {
        window.location.href = 'login.html';
    });
    
    // Profile button - go to profile page
    DOM.profileBtn?.addEventListener('click', () => {
        if (isFirebaseLoggedIn) {
            window.location.href = 'profile.html';
        } else {
            window.location.href = 'login.html';
        }
    });
    
    // Cart button - check login first
    DOM.cartBtn?.addEventListener('click', (e) => {
        e.preventDefault();
        if (isFirebaseLoggedIn) {
            window.location.href = 'cart.html';
        } else {
            showToast('Please login to view your cart', 'info');
            setTimeout(() => {
                window.location.href = 'login.html?redirect=cart';
            }, 1000);
        }
    });
    
    // Location Modal
    DOM.closeLocationModal?.addEventListener('click', closeLocationModal);
    DOM.detectLocationBtn?.addEventListener('click', detectLocation);
    DOM.saveLocationBtn?.addEventListener('click', saveLocation);
    DOM.pincode?.addEventListener('input', function() {
        this.value = this.value.replace(/[^0-9]/g, '');
    });
    
    // Cart Modal
    DOM.closeCartModal?.addEventListener('click', closeCartModal);
    DOM.checkoutBtn?.addEventListener('click', checkout);
    
    // Voice Modal
    DOM.closeVoiceModal?.addEventListener('click', closeVoiceModal);
    
    // Category Cards
    DOM.categoryCards.forEach(card => {
        card.addEventListener('click', function() {
            const category = this.getAttribute('data-category');
            filterByCategory(category);
        });
    });
    
    // Hero Section
    DOM.shopNowBtn?.addEventListener('click', function() {
        document.getElementById('productsSection')?.scrollIntoView({ behavior: 'smooth' });
    });
    
    // Offer Buttons
    DOM.offerBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            document.getElementById('productsSection')?.scrollIntoView({ behavior: 'smooth' });
        });
    });
    
    // Modal Close on Outside Click
    window.addEventListener('click', function(e) {
        if (e.target === DOM.locationModal) closeLocationModal();
        if (e.target === DOM.cartModal) closeCartModal();
        if (e.target === DOM.voiceModal) closeVoiceModal();
        
        if (!e.target.closest('.translate-btn') && !e.target.closest('.language-dropdown')) {
            DOM.languageDropdown?.classList.remove('show');
        }
    });
    
    // Navbar Scroll Effect
    window.addEventListener('scroll', function() {
        if (DOM.navbar) {
            if (window.scrollY > 100) {
                DOM.navbar.style.background = 'linear-gradient(135deg, #1b5e20 0%, #2e7d32 100%)';
            } else {
                DOM.navbar.style.background = 'linear-gradient(135deg, #2e7d32 0%, #66bb6a 100%)';
            }
        }
    });
    
    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeLocationModal();
            closeCartModal();
            closeVoiceModal();
            DOM.languageDropdown?.classList.remove('show');
        }
        
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            DOM.searchInput?.focus();
        }
    });
}

// ==================== AUTH UI FUNCTIONS ====================
function updateAuthUI() {
    if (isFirebaseLoggedIn && currentUser) {
        // User is logged in - hide login, show profile
        if (DOM.authBtn) {
            DOM.authBtn.style.display = 'none';
            DOM.authBtn.classList.add('hidden');
        }
        if (DOM.profileBtn) {
            DOM.profileBtn.style.display = 'flex';
            DOM.profileBtn.classList.remove('hidden');
        }
        console.log('🔄 UI Updated: Profile button visible');
    } else {
        // User is not logged in - show login, hide profile
        if (DOM.authBtn) {
            DOM.authBtn.style.display = 'flex';
            DOM.authBtn.classList.remove('hidden');
        }
        if (DOM.profileBtn) {
            DOM.profileBtn.style.display = 'none';
            DOM.profileBtn.classList.add('hidden');
        }
        console.log('🔄 UI Updated: Login button visible');
    }
}

function logout() {
    auth.signOut().then(() => {
        localStorage.removeItem('freshmart_user');
        localStorage.removeItem('freshmart_address');
        currentUser = null;
        isFirebaseLoggedIn = false;
        updateAuthUI();
        showToast('Logged out successfully!');
    }).catch((error) => {
        console.error('Logout error:', error);
        showToast('Error logging out', 'error');
    });
}

// ==================== SCROLLING TEXT ====================
function initScrollingText() {
    const text = searchSuggestions.join('   •   ');
    if (DOM.scrollingText) {
        DOM.scrollingText.textContent = text + '   •   ' + text;
    }
}

// ==================== PRODUCT FUNCTIONS ====================
function renderProducts(productsToRender = products) {
    if (!DOM.productsGrid) return;
    
    DOM.productsGrid.innerHTML = '';
    
    productsToRender.forEach(product => {
        const productCard = createProductCard(product);
        DOM.productsGrid.appendChild(productCard);
    });
}

function createProductCard(product) {
    const card = document.createElement('div');
    card.className = 'product-card';
    card.setAttribute('data-id', product.id);
    
    const isInWishlist = wishlist.includes(product.id);
    const cartItem = cart.find(item => item.id === product.id);
    
    card.innerHTML = `
        ${product.discount > 0 ? `<span class="product-badge">${product.discount}% OFF</span>` : ''}
        <button class="wishlist-btn ${isInWishlist ? 'active' : ''}" data-id="${product.id}">
            <i class="${isInWishlist ? 'fas' : 'far'} fa-heart"></i>
        </button>
        <img src="${product.image}" alt="${product.name}" class="product-image">
        <div class="product-info">
            <span class="product-category">${product.category}</span>
            <h3 class="product-name">${product.name}</h3>
            <span class="product-weight">${product.weight}</span>
            <div class="product-price-row">
                <div class="product-price">
                    <span class="current-price">₹${product.price}</span>
                    ${product.originalPrice > product.price ? `<span class="original-price">₹${product.originalPrice}</span>` : ''}
                </div>
                ${cartItem ? `
                    <div class="quantity-controls">
                        <button class="quantity-btn minus" data-id="${product.id}">-</button>
                        <span class="quantity">${cartItem.quantity}</span>
                        <button class="quantity-btn plus" data-id="${product.id}">+</button>
                    </div>
                ` : `
                    <button class="add-to-cart" data-id="${product.id}">${translations[currentLanguage].addToCart || 'Add'}</button>
                `}
            </div>
        </div>
    `;
    
    // Event listeners
    const wishlistBtn = card.querySelector('.wishlist-btn');
    wishlistBtn?.addEventListener('click', function(e) {
        e.stopPropagation();
        toggleWishlist(product.id);
    });
    
    const addToCartBtn = card.querySelector('.add-to-cart');
    addToCartBtn?.addEventListener('click', function(e) {
        e.stopPropagation();
        addToCart(product.id);
    });
    
    const minusBtn = card.querySelector('.quantity-btn.minus');
    minusBtn?.addEventListener('click', function(e) {
        e.stopPropagation();
        decreaseQuantity(product.id);
    });
    
    const plusBtn = card.querySelector('.quantity-btn.plus');
    plusBtn?.addEventListener('click', function(e) {
        e.stopPropagation();
        increaseQuantity(product.id);
    });
    
    return card;
}

function filterByCategory(category) {
    const filteredProducts = products.filter(product => product.category === category);
    renderProducts(filteredProducts);
    document.getElementById('productsSection')?.scrollIntoView({ behavior: 'smooth' });
    showToast(`Showing ${category} products`);
}

// ==================== CART FUNCTIONS ====================
function addToCart(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;
    
    const existingItem = cart.find(item => item.id === productId);
    
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({
            id: product.id,
            name: product.name,
            price: product.price,
            originalPrice: product.originalPrice,
            image: product.image,
            weight: product.weight,
            quantity: 1
        });
    }
    
    saveCartToLocalStorage();
    updateCartCount();
    renderProducts();
    showToast(`${product.name} added to cart`);
}

function increaseQuantity(productId) {
    const cartItem = cart.find(item => item.id === productId);
    if (cartItem) {
        cartItem.quantity += 1;
        saveCartToLocalStorage();
        updateCartCount();
        renderProducts();
        
        const product = products.find(p => p.id === productId);
        showToast(`${product.name} quantity: ${cartItem.quantity}`);
    }
}

function decreaseQuantity(productId) {
    const cartItem = cart.find(item => item.id === productId);
    if (cartItem) {
        cartItem.quantity -= 1;
        const product = products.find(p => p.id === productId);
        
        if (cartItem.quantity <= 0) {
            cart = cart.filter(item => item.id !== productId);
            showToast(`${product.name} removed from cart`);
        } else {
            showToast(`${product.name} quantity: ${cartItem.quantity}`);
        }
        
        saveCartToLocalStorage();
        updateCartCount();
        renderProducts();
    }
}

function removeFromCart(productId) {
    const product = products.find(p => p.id === productId);
    cart = cart.filter(item => item.id !== productId);
    
    saveCartToLocalStorage();
    updateCartCount();
    renderProducts();
    renderCartItems();
    
    if (product) showToast(`${product.name} removed from cart`);
}

function updateCartCount() {
    const totalQty = cart.reduce((sum, item) => sum + item.quantity, 0);
    if (DOM.cartCount) {
        DOM.cartCount.textContent = totalQty;
        DOM.cartCount.style.display = totalQty > 0 ? 'flex' : 'none';
    }
}

function renderCartItems() {
    if (!DOM.cartItems) return;
    
    if (cart.length === 0) {
        DOM.emptyCart?.classList.remove('hidden');
        DOM.cartSummary?.classList.add('hidden');
        DOM.cartItems.innerHTML = '';
        if (DOM.cartItemsCount) DOM.cartItemsCount.textContent = '0 items';
        return;
    }
    
    DOM.emptyCart?.classList.add('hidden');
    DOM.cartSummary?.classList.remove('hidden');
    
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    if (DOM.cartItemsCount) DOM.cartItemsCount.textContent = `${totalItems} items`;
    
    DOM.cartItems.innerHTML = cart.map(item => `
        <div class="cart-item" data-id="${item.id}">
            <img src="${item.image}" alt="${item.name}" class="cart-item-image">
            <div class="cart-item-details">
                <h4 class="cart-item-name">${item.name}</h4>
                <span class="cart-item-weight">${item.weight || ''}</span>
                <div class="cart-item-price">₹${item.price}</div>
            </div>
            <div class="cart-item-actions">
                <div class="quantity-controls">
                    <button class="quantity-btn minus" onclick="decreaseQuantity(${item.id})">-</button>
                    <span class="quantity">${item.quantity}</span>
                    <button class="quantity-btn plus" onclick="increaseQuantity(${item.id})">+</button>
                </div>
                <button class="remove-item" onclick="removeFromCart(${item.id})">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
    `).join('');
    
    updateCartSummary();
}

function updateCartSummary() {
    const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    const deliveryFee = subtotal > 500 ? 0 : 40;
    const discount = cart.reduce((sum, item) => {
        const product = products.find(p => p.id === item.id);
        if (product && product.originalPrice > product.price) {
            return sum + ((product.originalPrice - product.price) * item.quantity);
        }
        return sum;
    }, 0);
    const total = subtotal + deliveryFee;
    
    if (DOM.subtotal) DOM.subtotal.textContent = `₹${subtotal}`;
    if (DOM.deliveryFee) DOM.deliveryFee.textContent = deliveryFee === 0 ? 'FREE' : `₹${deliveryFee}`;
    if (DOM.discount) DOM.discount.textContent = `-₹${discount}`;
    if (DOM.totalAmount) DOM.totalAmount.textContent = `₹${total}`;
}

// ==================== WISHLIST FUNCTIONS ====================
function toggleWishlist(productId) {
    const index = wishlist.indexOf(productId);
    const product = products.find(p => p.id === productId);
    
    if (index > -1) {
        wishlist.splice(index, 1);
        showToast(`${product.name} removed from wishlist`);
    } else {
        wishlist.push(productId);
        showToast(`${product.name} added to wishlist!`);
    }
    
    saveWishlistToLocalStorage();
    renderProducts();
}

// ==================== SEARCH FUNCTIONS ====================
function performSearch() {
    const searchTerm = DOM.searchInput?.value.trim().toLowerCase();
    
    if (!searchTerm) {
        renderProducts();
        return;
    }
    
    const filteredProducts = products.filter(product => 
        product.name.toLowerCase().includes(searchTerm) ||
        product.category.toLowerCase().includes(searchTerm)
    );
    
    if (filteredProducts.length === 0) {
        if (DOM.productsGrid) {
            DOM.productsGrid.innerHTML = `
                <div style="grid-column: 1/-1; text-align: center; padding: 50px;">
                    <i class="fas fa-search" style="font-size: 3rem; color: #ccc; margin-bottom: 20px;"></i>
                    <p style="font-size: 1.2rem; color: #666;">No products found for "${searchTerm}"</p>
                </div>
            `;
        }
    } else {
        renderProducts(filteredProducts);
    }
    
    document.getElementById('productsSection')?.scrollIntoView({ behavior: 'smooth' });
}

// ==================== VOICE SEARCH FUNCTIONS ====================
function startVoiceSearch() {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    
    if (!SpeechRecognition) {
        showToast('Voice search is not supported in your browser');
        return;
    }
    
    openVoiceModal();
    
    const recognition = new SpeechRecognition();
    recognition.lang = currentLanguage === 'hi' ? 'hi-IN' : 
                       currentLanguage === 'te' ? 'te-IN' :
                       currentLanguage === 'ta' ? 'ta-IN' :
                       currentLanguage === 'es' ? 'es-ES' :
                       currentLanguage === 'fr' ? 'fr-FR' : 'en-US';
    recognition.interimResults = true;
    recognition.maxAlternatives = 1;
    
    recognition.onstart = function() {
        if (DOM.voiceStatus) DOM.voiceStatus.textContent = 'Listening...';
        if (DOM.voiceResult) DOM.voiceResult.textContent = '';
        DOM.voiceAnimation?.classList.add('active');
    };
    
    recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        if (DOM.voiceResult) DOM.voiceResult.textContent = transcript;
        
        if (event.results[0].isFinal) {
            if (DOM.searchInput) DOM.searchInput.value = transcript;
            setTimeout(() => {
                closeVoiceModal();
                performSearch();
            }, 1000);
        }
    };
    
    recognition.onerror = function(event) {
        if (DOM.voiceStatus) DOM.voiceStatus.textContent = 'Error: ' + event.error;
        setTimeout(closeVoiceModal, 2000);
    };
    
    recognition.onend = function() {
        DOM.voiceAnimation?.classList.remove('active');
        if (DOM.voiceResult && !DOM.voiceResult.textContent) {
            if (DOM.voiceStatus) DOM.voiceStatus.textContent = 'No speech detected. Try again.';
            setTimeout(closeVoiceModal, 2000);
        }
    };
    
    recognition.start();
}

// ==================== LANGUAGE FUNCTIONS ====================
function toggleLanguageDropdown() {
    DOM.languageDropdown?.classList.toggle('show');
}

function changeLanguage(lang) {
    currentLanguage = lang;
    saveLanguageToLocalStorage();
    
    const t = translations[lang];
    
    if (t.searchPlaceholder && DOM.searchInput) DOM.searchInput.placeholder = t.searchPlaceholder;
    if (t.selectLocation && !currentLocation && DOM.currentLocationSpan) {
        DOM.currentLocationSpan.textContent = t.selectLocation;
    }
    
    const categoryHeader = document.querySelector('#categoriesSection .section-header');
    if (categoryHeader && t.shopByCategory) {
        const h2 = categoryHeader.querySelector('h2');
        const p = categoryHeader.querySelector('p');
        if (h2) h2.textContent = t.shopByCategory;
        if (p) p.textContent = t.browseCategories;
    }
    
    const productsHeader = document.querySelector('#productsSection .section-header');
    if (productsHeader && t.featuredProducts) {
        const h2 = productsHeader.querySelector('h2');
        const p = productsHeader.querySelector('p');
        if (h2) h2.textContent = t.featuredProducts;
        if (p) p.textContent = t.bestQuality;
    }
    
    renderProducts();
    DOM.languageDropdown?.classList.remove('show');
    showToast(`Language changed to ${lang.toUpperCase()}`);
}

// ==================== LOCATION MODAL FUNCTIONS ====================
function openLocationModal() {
    DOM.locationModal?.classList.add('show');
}

function closeLocationModal() {
    DOM.locationModal?.classList.remove('show');
}

function detectLocation() {
    if (!navigator.geolocation) {
        showToast('Geolocation is not supported by your browser');
        return;
    }
    
    if (DOM.detectLocationBtn) {
        DOM.detectLocationBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Detecting...';
        DOM.detectLocationBtn.disabled = true;
    }
    
    navigator.geolocation.getCurrentPosition(
        async function(position) {
            const { latitude, longitude } = position.coords;
            
            try {
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`
                );
                const data = await response.json();
                
                const address = data.display_name || `${latitude.toFixed(4)}, ${longitude.toFixed(4)}`;
                const pincode = data.address?.postcode || '';
                
                if (DOM.manualAddress) DOM.manualAddress.value = address;
                if (DOM.pincode) DOM.pincode.value = pincode;
                
                showToast('Location detected successfully!');
            } catch (error) {
                if (DOM.manualAddress) {
                    DOM.manualAddress.value = `Lat: ${latitude.toFixed(4)}, Long: ${longitude.toFixed(4)}`;
                }
                showToast('Location detected!');
            }
            
            if (DOM.detectLocationBtn) {
                DOM.detectLocationBtn.innerHTML = '<i class="fas fa-crosshairs"></i> Detect my location';
                DOM.detectLocationBtn.disabled = false;
            }
        },
        function(error) {
            let message = 'Unable to detect location';
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    message = 'Location permission denied';
                    break;
                case error.POSITION_UNAVAILABLE:
                    message = 'Location information unavailable';
                    break;
                case error.TIMEOUT:
                    message = 'Location request timed out';
                    break;
            }
            showToast(message);
            if (DOM.detectLocationBtn) {
                DOM.detectLocationBtn.innerHTML = '<i class="fas fa-crosshairs"></i> Detect my location';
                DOM.detectLocationBtn.disabled = false;
            }
        }
    );
}

function saveLocation() {
    const address = DOM.manualAddress?.value.trim();
    const pincode = DOM.pincode?.value.trim();
    
    if (!address) {
        showToast('Please enter an address');
        return;
    }
    
    currentLocation = { address, pincode };
    saveLocationToLocalStorage();
    
    const shortAddress = address.length > 20 ? address.substring(0, 20) + '...' : address;
    if (DOM.currentLocationSpan) DOM.currentLocationSpan.textContent = shortAddress;
    
    closeLocationModal();
    showToast('Location saved successfully!');
}

// ==================== CART MODAL FUNCTIONS ====================
function openCartModal() {
    renderCartItems();
    DOM.cartModal?.classList.add('show');
}

function closeCartModal() {
    DOM.cartModal?.classList.remove('show');
}

function checkout() {
    if (cart.length === 0) {
        showToast('Your cart is empty!');
        return;
    }
    
    if (!isFirebaseLoggedIn) {
        closeCartModal();
        showToast('Please login to continue');
        setTimeout(() => {
            window.location.href = 'login.html?redirect=cart';
        }, 1000);
        return;
    }
    
    if (!currentLocation) {
        closeCartModal();
        openLocationModal();
        showToast('Please select a delivery location');
        return;
    }
    
    // Redirect to cart page for checkout
    window.location.href = 'cart.html';
}

// ==================== VOICE MODAL FUNCTIONS ====================
function openVoiceModal() {
    DOM.voiceModal?.classList.add('show');
    if (DOM.voiceStatus) DOM.voiceStatus.textContent = 'Listening...';
    if (DOM.voiceResult) DOM.voiceResult.textContent = '';
}

function closeVoiceModal() {
    DOM.voiceModal?.classList.remove('show');
}

// ==================== TOAST NOTIFICATION ====================
function showToast(message, type = 'success') {
    if (!DOM.toastMessage || !DOM.toast) return;
    
    DOM.toastMessage.textContent = message;
    
    const icon = DOM.toast.querySelector('i');
    if (icon) {
        icon.className = type === 'error' ? 'fas fa-times-circle' :
                         type === 'info' ? 'fas fa-info-circle' :
                         'fas fa-check-circle';
    }
    
    DOM.toast.style.background = type === 'error' ? '#e53935' :
                                  type === 'info' ? '#1976d2' :
                                  '#2e7d32';
    
    DOM.toast.classList.add('show');
    
    setTimeout(() => {
        DOM.toast.classList.remove('show');
    }, 3000);
}

// ==================== UI UPDATE FUNCTIONS ====================
function updateUI() {
    updateCartCount();
    
    if (currentLocation && DOM.currentLocationSpan) {
        const shortAddress = currentLocation.address.length > 20 
            ? currentLocation.address.substring(0, 20) + '...' 
            : currentLocation.address;
        DOM.currentLocationSpan.textContent = shortAddress;
    }
}

// ==================== UTILITY FUNCTIONS ====================
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Scroll shadow effect
window.addEventListener('scroll', debounce(function() {
    if (DOM.navbar) {
        DOM.navbar.style.boxShadow = window.scrollY > 50 
            ? '0 4px 20px rgba(0, 0, 0, 0.15)' 
            : '0 4px 12px rgba(0, 0, 0, 0.15)';
    }
}, 10));

// Smooth scroll for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        target?.scrollIntoView({ behavior: 'smooth' });
    });
});

// Scroll animations
function initScrollAnimations() {
    const animatedElements = document.querySelectorAll('.category-card, .product-card, .why-us-card, .offer-card');
    
    const animationObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, { threshold: 0.1 });
    
    animatedElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
        animationObserver.observe(el);
    });
}

document.addEventListener('DOMContentLoaded', function() {
    setTimeout(initScrollAnimations, 100);
});

// Console message
console.log('%c🥬 FreshMart - Your Online Grocery Store 🛒', 
    'color: #2e7d32; font-size: 20px; font-weight: bold;');
console.log('%cBuilt with ❤️ for fresh groceries delivery', 
    'color: #666; font-size: 12px;');